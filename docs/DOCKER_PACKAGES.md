# Docker Package Management - Dell Switch Port Tracer

## 📦 **Package Repository**

**GitHub Container Registry**: `ghcr.io/crispy-pasta/port-tracer`

## 🏷️ **Docker Image Tagging Strategy**

### **Automatic Tags** (Generated by CI)

| Tag Pattern | Source | Example | Purpose |
|------------|---------|---------|---------|
| `latest` | `main` branch | `latest` | **Production-ready** stable release |
| `develop-latest` | `develop` branch | `develop-latest` | **Latest development** build |
| `main` | `main` branch | `main` | **Main branch** snapshot |
| `develop` | `develop` branch | `develop` | **Develop branch** snapshot |
| `v2.1.6` | Git tag `v2.1.6` | `v2.1.6` | **Specific version** release |
| `2.1` | Git tag `v2.1.x` | `2.1` | **Major.Minor** version |
| `main-abc1234` | Main + commit SHA | `main-abc1234` | **Specific commit** from main |
| `develop-def5678` | Develop + commit SHA | `develop-def5678` | **Specific commit** from develop |

### **Current Package Status**

#### **Expected Tags After v2.1.6 Release:**
- ✅ `latest` (from main branch push)
- ✅ `main` (from main branch push) 
- ✅ `v2.1.6` (from Git tag `v2.1.6`)
- ✅ `2.1` (from Git tag `v2.1.6`)
- ✅ `main-[commit-sha]` (from main branch push)

#### **Expected Tags After Develop Updates:**
- ✅ `develop-latest` (always latest develop)
- ✅ `develop` (branch snapshot)
- ✅ `develop-[commit-sha]` (specific develop commit)

## 🔄 **Package Update Timeline**

### **Why Package Shows "20 Hours Ago"**
The Docker package timestamp reflects the **last CI build**, not necessarily the latest code:

1. **20 hours ago**: Last `develop` branch build
2. **Now**: `main` branch push with v2.1.6 tag
3. **Expected**: New package build with updated timestamp

### **Current CI Status**
- ✅ **CD Pipeline**: DISABLED (as requested)
- ✅ **CI Pipeline**: ENABLED (tests + Docker build)
- ⏳ **Package Build**: Running now (triggered by main push + tag)

## 📋 **Using Docker Images**

### **For Production Deployments**
```bash
# Recommended: Use specific version tags
docker pull ghcr.io/crispy-pasta/port-tracer:v2.1.6
docker run ghcr.io/crispy-pasta/port-tracer:v2.1.6

# Alternative: Use latest (always main branch)
docker pull ghcr.io/crispy-pasta/port-tracer:latest
```

### **For Development/Testing**
```bash
# Use develop branch builds
docker pull ghcr.io/crispy-pasta/port-tracer:develop-latest
docker run ghcr.io/crispy-pasta/port-tracer:develop-latest

# Use specific develop commit
docker pull ghcr.io/crispy-pasta/port-tracer:develop-abc1234
```

### **Docker Compose Integration**
```yaml
# docker-compose.yml (development)
services:
  app:
    image: ghcr.io/crispy-pasta/port-tracer:develop-latest

# docker-compose.prod.yml (production)  
services:
  app:
    image: ghcr.io/crispy-pasta/port-tracer:v2.1.6
```

## 🔍 **Checking Package Status**

### **GitHub Container Registry**
1. **Navigate to**: https://github.com/Crispy-Pasta/SwitchPortManager/pkgs/container/port-tracer
2. **Check Tags**: All available image tags and timestamps
3. **Verify Latest**: Confirm latest build timestamp

### **Command Line**
```bash
# List all available tags
docker search ghcr.io/crispy-pasta/port-tracer

# Pull and inspect specific image
docker pull ghcr.io/crispy-pasta/port-tracer:v2.1.6
docker inspect ghcr.io/crispy-pasta/port-tracer:v2.1.6

# Check image creation date
docker images ghcr.io/crispy-pasta/port-tracer
```

## 🚀 **CI/CD Pipeline Status**

### **✅ Enabled: CI Pipeline**
- **Triggers**: Push to `main`, `develop`, tags `v*.*.*`
- **Actions**: Tests, linting, Docker build & push
- **Output**: Updated Docker packages with proper tags

### **❌ Disabled: CD Pipeline**  
- **File**: `.github/workflows/deploy-prod.yml.disabled`
- **Reason**: Using different deployment approach/tool
- **Status**: Completely disabled, no automatic deployments

### **Next Package Update**
The current merge to `main` + `v2.1.6` tag should trigger:
1. **CI Pipeline**: Tests and Docker build
2. **New Package Tags**: 
   - `latest` (updated timestamp)
   - `v2.1.6` (new version tag)
   - `2.1` (major.minor tag)
   - `main` (branch tag)

## 🎯 **Expected Resolution**

After the current CI pipeline completes (~5-10 minutes):
- ✅ **Package timestamp**: Will show "minutes ago" instead of "20 hours ago"
- ✅ **Latest tag**: Will point to main branch (v2.1.6)
- ✅ **Version tags**: `v2.1.6` and `2.1` will be available
- ✅ **Production ready**: Latest stable image available for deployment

---

**Note**: The "20 hours ago" timestamp indicates the last time the package was built, which was likely from a develop branch push. The new main branch + tag push will update this timestamp and create proper version tags.
